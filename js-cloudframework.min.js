!function(e){var r=!1;if("function"==typeof define&&define.amd&&(define(e),r=!0),"object"==typeof exports&&(module.exports=e(),r=!0),!r){var o=window.Cookies,t=window.Cookies=e();t.noConflict=function(){return window.Cookies=o,t}}}(function(){function e(){for(var e=0,r={};e<arguments.length;e++){var o=arguments[e];for(var t in o)r[t]=o[t]}return r}function r(o){function t(r,n,i){var s;if("undefined"!=typeof document){if(arguments.length>1){if(i=e({path:"/"},t.defaults,i),"number"==typeof i.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}i.expires=i.expires?i.expires.toUTCString():"";try{s=JSON.stringify(n),/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=o.write?o.write(n,r):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),r=encodeURIComponent(String(r)),r=r.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),r=r.replace(/[\(\)]/g,escape);var u="";for(var c in i)i[c]&&(u+="; "+c,!0!==i[c]&&(u+="="+i[c]));return document.cookie=r+"="+n+u}r||(s={});for(var d=document.cookie?document.cookie.split("; "):[],l=0;l<d.length;l++){var f=d[l].split("="),h=f.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var p=f[0].replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent);if(h=o.read?o.read(h,p):o(h,p)||h.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(r===p){s=h;break}r||(s[p]=h)}catch(e){}}return s}}return t.set=t,t.get=function(e){return t.call(t,e)},t.getJSON=function(){return t.apply({json:!0},[].slice.call(arguments))},t.defaults={},t.remove=function(r,o){t(r,"",e(o,{expires:-1}))},t.withConverter=r,t}return r(function(){})});var LZString=function(){function e(e,r){if(!n[e]){n[e]={};for(var o=0;o<e.length;o++)n[e][e.charAt(o)]=o}return n[e][r]}var r=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={},i={compressToBase64:function(e){if(null==e)return"";var r=i._compress(e,6,function(e){return o.charAt(e)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(r){return null==r?"":""==r?null:i._decompress(r.length,32,function(t){return e(o,r.charAt(t))})},compressToUTF16:function(e){return null==e?"":i._compress(e,15,function(e){return r(e+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,function(r){return e.charCodeAt(r)-32})},compressToUint8Array:function(e){for(var r=i.compress(e),o=new Uint8Array(2*r.length),t=0,n=r.length;t<n;t++){var s=r.charCodeAt(t);o[2*t]=s>>>8,o[2*t+1]=s%256}return o},decompressFromUint8Array:function(e){if(null===e||void 0===e)return i.decompress(e);for(var o=new Array(e.length/2),t=0,n=o.length;t<n;t++)o[t]=256*e[2*t]+e[2*t+1];var s=[];return o.forEach(function(e){s.push(r(e))}),i.decompress(s.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,function(e){return t.charAt(e)})},decompressFromEncodedURIComponent:function(r){return null==r?"":""==r?null:(r=r.replace(/ /g,"+"),i._decompress(r.length,32,function(o){return e(t,r.charAt(o))}))},compress:function(e){return i._compress(e,16,function(e){return r(e)})},_compress:function(e,r,o){if(null==e)return"";var t,n,i,s={},a={},u="",c="",d="",l=2,f=3,h=2,p=[],C=0,g=0;for(i=0;i<e.length;i+=1)if(u=e.charAt(i),Object.prototype.hasOwnProperty.call(s,u)||(s[u]=f++,a[u]=!0),c=d+u,Object.prototype.hasOwnProperty.call(s,c))d=c;else{if(Object.prototype.hasOwnProperty.call(a,d)){if(d.charCodeAt(0)<256){for(t=0;t<h;t++)C<<=1,g==r-1?(g=0,p.push(o(C)),C=0):g++;for(n=d.charCodeAt(0),t=0;t<8;t++)C=C<<1|1&n,g==r-1?(g=0,p.push(o(C)),C=0):g++,n>>=1}else{for(n=1,t=0;t<h;t++)C=C<<1|n,g==r-1?(g=0,p.push(o(C)),C=0):g++,n=0;for(n=d.charCodeAt(0),t=0;t<16;t++)C=C<<1|1&n,g==r-1?(g=0,p.push(o(C)),C=0):g++,n>>=1}l--,0==l&&(l=Math.pow(2,h),h++),delete a[d]}else for(n=s[d],t=0;t<h;t++)C=C<<1|1&n,g==r-1?(g=0,p.push(o(C)),C=0):g++,n>>=1;l--,0==l&&(l=Math.pow(2,h),h++),s[c]=f++,d=String(u)}if(""!==d){if(Object.prototype.hasOwnProperty.call(a,d)){if(d.charCodeAt(0)<256){for(t=0;t<h;t++)C<<=1,g==r-1?(g=0,p.push(o(C)),C=0):g++;for(n=d.charCodeAt(0),t=0;t<8;t++)C=C<<1|1&n,g==r-1?(g=0,p.push(o(C)),C=0):g++,n>>=1}else{for(n=1,t=0;t<h;t++)C=C<<1|n,g==r-1?(g=0,p.push(o(C)),C=0):g++,n=0;for(n=d.charCodeAt(0),t=0;t<16;t++)C=C<<1|1&n,g==r-1?(g=0,p.push(o(C)),C=0):g++,n>>=1}l--,0==l&&(l=Math.pow(2,h),h++),delete a[d]}else for(n=s[d],t=0;t<h;t++)C=C<<1|1&n,g==r-1?(g=0,p.push(o(C)),C=0):g++,n>>=1;l--,0==l&&(l=Math.pow(2,h),h++)}for(n=2,t=0;t<h;t++)C=C<<1|1&n,g==r-1?(g=0,p.push(o(C)),C=0):g++,n>>=1;for(;;){if(C<<=1,g==r-1){p.push(o(C));break}g++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,function(r){return e.charCodeAt(r)})},_decompress:function(e,o,t){var n,i,s,a,u,c,d,l=[],f=4,h=4,p=3,C="",g=[],y={val:t(0),position:o,index:1};for(n=0;n<3;n+=1)l[n]=n;for(s=0,u=Math.pow(2,2),c=1;c!=u;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=o,y.val=t(y.index++)),s|=(a>0?1:0)*c,c<<=1;switch(s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=o,y.val=t(y.index++)),s|=(a>0?1:0)*c,c<<=1;d=r(s);break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=o,y.val=t(y.index++)),s|=(a>0?1:0)*c,c<<=1;d=r(s);break;case 2:return""}for(l[3]=d,i=d,g.push(d);;){if(y.index>e)return"";for(s=0,u=Math.pow(2,p),c=1;c!=u;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=o,y.val=t(y.index++)),s|=(a>0?1:0)*c,c<<=1;switch(d=s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=o,y.val=t(y.index++)),s|=(a>0?1:0)*c,c<<=1;l[h++]=r(s),d=h-1,f--;break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=o,y.val=t(y.index++)),s|=(a>0?1:0)*c,c<<=1;l[h++]=r(s),d=h-1,f--;break;case 2:return g.join("")}if(0==f&&(f=Math.pow(2,p),p++),l[d])C=l[d];else{if(d!==h)return null;C=i+i.charAt(0)}g.push(C),l[h++]=i+C.charAt(0),f--,i=C,0==f&&(f=Math.pow(2,p),p++)}}};return i}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString),function(e){"use strict";function r(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function o(e){return"string"!=typeof e&&(e=String(e)),e}function t(e){var r={next:function(){var r=e.shift();return{done:void 0===r,value:r}}};return y.iterable&&(r[Symbol.iterator]=function(){return r}),r}function n(e){this.map={},e instanceof n?e.forEach(function(e,r){this.append(r,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(r){this.append(r,e[r])},this)}function i(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function s(e){return new Promise(function(r,o){e.onload=function(){r(e.result)},e.onerror=function(){o(e.error)}})}function a(e){var r=new FileReader,o=s(r);return r.readAsArrayBuffer(e),o}function u(e){var r=new FileReader,o=s(r);return r.readAsText(e),o}function c(e){for(var r=new Uint8Array(e),o=new Array(r.length),t=0;t<r.length;t++)o[t]=String.fromCharCode(r[t]);return o.join("")}function d(e){if(e.slice)return e.slice(0);var r=new Uint8Array(e.byteLength);return r.set(new Uint8Array(e)),r.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(y.arrayBuffer&&y.blob&&m(e))this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!v(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var r=e.toUpperCase();return w.indexOf(r)>-1?r:e}function h(e,r){r=r||{};var o=r.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,r.headers||(this.headers=new n(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=r.credentials||this.credentials||"omit",!r.headers&&this.headers||(this.headers=new n(r.headers)),this.method=f(r.method||this.method||"GET"),this.mode=r.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function p(e){var r=new FormData;return e.trim().split("&").forEach(function(e){if(e){var o=e.split("="),t=o.shift().replace(/\+/g," "),n=o.join("=").replace(/\+/g," ");r.append(decodeURIComponent(t),decodeURIComponent(n))}}),r}function C(e){var r=new n;return e.split(/\r?\n/).forEach(function(e){var o=e.split(":"),t=o.shift().trim();if(t){var n=o.join(":").trim();r.append(t,n)}}),r}function g(e,r){r||(r={}),this.type="default",this.status="status"in r?r.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in r?r.statusText:"OK",this.headers=new n(r.headers),this.url=r.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(y.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(e){return e&&DataView.prototype.isPrototypeOf(e)},v=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};n.prototype.append=function(e,t){e=r(e),t=o(t);var n=this.map[e];this.map[e]=n?n+","+t:t},n.prototype.delete=function(e){delete this.map[r(e)]},n.prototype.get=function(e){return e=r(e),this.has(e)?this.map[e]:null},n.prototype.has=function(e){return this.map.hasOwnProperty(r(e))},n.prototype.set=function(e,t){this.map[r(e)]=o(t)},n.prototype.forEach=function(e,r){for(var o in this.map)this.map.hasOwnProperty(o)&&e.call(r,this.map[o],o,this)},n.prototype.keys=function(){var e=[];return this.forEach(function(r,o){e.push(o)}),t(e)},n.prototype.values=function(){var e=[];return this.forEach(function(r){e.push(r)}),t(e)},n.prototype.entries=function(){var e=[];return this.forEach(function(r,o){e.push([o,r])}),t(e)},y.iterable&&(n.prototype[Symbol.iterator]=n.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},l.call(h.prototype),l.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];g.redirect=function(e,r){if(-1===k.indexOf(r))throw new RangeError("Invalid status code");return new g(null,{status:r,headers:{location:e}})},e.Headers=n,e.Request=h,e.Response=g,e.fetch=function(e,r){return new Promise(function(o,t){var n=new h(e,r),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:C(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var r="response"in i?i.response:i.responseText;o(new g(r,e))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(n.method,n.url,!0),"include"===n.credentials&&(i.withCredentials=!0),"responseType"in i&&y.blob&&(i.responseType="blob"),n.headers.forEach(function(e,r){i.setRequestHeader(r,e)}),i.send(void 0===n._bodyInit?null:n._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),Core=new function(){this.version="1.1.2",this.debug=!1,this.authActive=!1,this.authCookieName="cfauth",this.url=new function(){this.params=function(e){var r=window.location.pathname.split("/");return r.shift(),void 0===e?r:r[e]?r[e]:null},this.formParams=function(e){if(void 0===e){var r=new RegExp("[?&](.*)").exec(window.location.href);return null==r?"":r[1]||0}var r=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==r?null!=(r=new RegExp("[?&]("+e+")[&#$]*").exec(window.location.href))||null:r[1]||0},this.parts=function(e){return void 0===e?window.location:window.location[e]}},this.log=new function(){this.debug=!0,this.type="console",this.printDebug=function(e,r,o){Core.log.debug&&Core.log.print(e,r,o)},this.print=function(e,r,o){if(void 0===e&&(e="print:"),void 0===r&&(r=!1),"console"==Core.log.type)"object"==typeof e&&(e=JSON.parse(JSON.stringify(e))),"object"==typeof r&&(r=JSON.parse(JSON.stringify(r))),console.log(e),r&&console.log(r);else{"object"==typeof e&&(e=JSON.stringify(e)),"object"==typeof r&&(r=JSON.stringify(r)),void 0===o&&(o=!1);var t=e;r&&(t+=r),o&&(t+="\n-----------\n"),null!=(element=document.getElementById(Core.log.type))?element.innerHTML=element.innerHTML+t:(console.log("Core.log.type values "+Core.log.type+" and it does not exist as a id dom"),console.log(t))}}},this.error=new function(){this.add=function(e,r,o){void 0===e?e="[Core.error]:":"string"==typeof e&&(e="[Core.error]: "+e),Core.log.print(e,r,!0)}},this.data=new function(){this.info={},this.add=function(e){if("object"!=typeof e)return Core.error.add("Core.data.add(data)","data is not an object"),!1;for(k in e)Core.data.info[k]=e[k];return Core.cache.set("CloudFrameWorkAuthUser",Core.data.info),!0},this.set=function(e,r){return"string"!=typeof e?(Core.error.add("Core.data.set(key,value)","key is not a string"),!1):(Core.data.info[e]=r,Core.cache.set("CloudFrameWorkAuthUser",Core.data.info),!0)},this.get=function(e){if(void 0!==e)return Core.data.info[e]},this.reset=function(){Core.data.info={}}},this.cookies=new function(){this.path={path:"/"},this.remove=function(e){void 0!==e&&(Cookies.remove(e,Core.cookies.path),Core.debug&&Core.log.printDebug('Core.cookies.remove("'+e+'");'))},this.set=function(e,r){Cookies.set(e,r,Core.cookies.path),Core.debug&&Core.log.printDebug('Core.cookies.set("'+e+'",'+typeof r+");")},this.get=function(e){return Cookies.get(e)}},this.cache=new function(){this.isAvailable=!0,"undefined"==typeof Storage&&(Core.error.add("Cache is not supported in this browser"),this.available=!1),this.set=function(e,r){return Core.debug&&Core.log.printDebug('Core.cache.set("'+e+'",..)'),!!Core.cache.isAvailable&&(e="CloudFrameWorkCache_"+e,r="object"==typeof r?JSON.stringify(r):JSON.stringify({__object:r}),r=LZString.compress(r),localStorage.setItem(e,r),!0)},this.get=function(e){if(Core.debug&&Core.log.printDebug('Core.cache.get("'+e+'",..)'),Core.cache.isAvailable){e="CloudFrameWorkCache_"+e;var r=localStorage.getItem(e);return void 0!=typeof r&&null!=r&&(r=JSON.parse(LZString.decompress(r)),void 0!==r.__object&&(r=r.__object)),r}return!1},this.delete=function(e){return Core.debug&&Core.log.printDebug('Core.cache.delete("'+e+'",..)'),!!Core.cache.isAvailable&&(e="CloudFrameWorkCache_"+e,localStorage.removeItem(e),!0)}},this.request=new function(){this.token="",this.key="",this.headers={},this.base="https://cloudframework.com/h/api",this.serialize=function(e,r){var o,t=[];for(o in e)if(e.hasOwnProperty(o)){var n=r?r+"["+o+"]":o,i=e[o];t.push(null!==i&&"object"==typeof i?Core.request.serialize(i,n):encodeURIComponent(n)+"="+encodeURIComponent(i))}return t.join("&")},this.call=function(e,r,o){if(void 0===e.url)return Core.error.add('request.call(payload,..): missing payload["url"].');if(void 0===e.method)return Core.error.add('request.call(payload,..): missing payload["method"].');void 0===e.contentType&&(e.contentType="json"),void 0===e.responseType&&(e.responseType="json"),void 0!==r&&null!=r||(r=function(e){console.log(e)}),void 0!==o&&null!=o||(o=r),void 0===e.headers&&(e.headers={});for(var t in Core.request.headers)void 0===e.headers[t]&&(e.headers[t]=Core.request.headers[t]);void 0!==Core.request.token&&""!=Core.request.token&&(e.headers["X-DS-TOKEN"]=Core.request.token),void 0!==Core.request.key&&""!=Core.request.key&&(e.headers["X-WEB-KEY"]=Core.request.key);var n=e.url;if(0!==n.search("http")&&(n=Core.request.base+n),void 0===e.mode&&(e.mode="cors"),void 0===e.credentials&&(e.credentials="none"),void 0===e.params&&(e.params={}),"GET"==e.method){e.body=null;var i="";Object.keys(e.params).length&&(i=Core.request.serialize(e.params)),i&&(-1==n.search("[?]")?n+="?":n+="&",n+=i)}else if("DELETE"!=e.method)if("json"==e.contentType)e.headers["Content-Type"]="application/json",e.body=JSON.stringify(e.params);else{e.headers["Content-Type"]="application/x-www-form-urlencoded";var s=new FormData;for(var t in e.params)s.append(t,e.params[t]);e.body=s}Core.debug&&Core.log.printDebug("Core.request.call",e,!0);var a={method:e.method,headers:e.headers,mode:e.mode,credentials:e.credentials};void 0!==e.body&&null!=e.body&&(a.body=e.body),fetch(n,a).then(function(r){return Core.debug&&Core.log.printDebug("Core.request.call returning from: "+n,"Tranforming from: "+e.responseType,!0),"no-cors"==e.mode?r:"json"==e.responseType?r.json():r.text()}).then(function(e){r(e)}).catch(function(e){Core.error.add("[Error] request.call("+n+") "+e),o(e)})},this.get=function(e,r,o,t){Core.request.call({method:"GET",url:e,responseType:t},r,o)},this.addHeader=function(e,r){Core.debug&&Core.log.printDebug('Core.request.addHeader("'+e+'","'+r+'")'),Core.request.headers[e]=r},this.removeHeader=function(e){Core.debug&&Core.log.printDebug('Core.request.removeHeader("'+e+'")'),delete Core.request.headers[e]},this.resetHeader=function(){Core.debug&&Core.log.printDebug("Core.request.resetHeader()"),Core.request.headers={}}},this.services=new function(){var e={};this.reset=function(r){Core.log.printDebug("Bloombees services: reset."+r),void 0!==e[r]&&(e[r]={config:e[r].config})},this.set=function(r,o){return e[r]=[],void 0===o.url?Core.error.add('Core.services.set("'+r+'",config): missing config["url"].'):void 0===o.method?Core.error.add('Core.services.set("'+r+'",config): missing config["method"].'):(e[r].config=o,void(Core.debug&&Core.log.printDebug('Core.services.set("'+r+'","'+JSON.stringify(o)+'"): done')))},this.bind=function(r,o){return void 0===e[r]?Core.error.add('service.bind("'+r+'",..) does not exist. Use Core.service.set to initialize'):void 0===e[r].config?Core.error.add('service.bind("'+r+'",..) does not exist. Use Core.service.set to initialize'):(Core.debug&&Core.log.printDebug("Binding to '"+r+"':"),void 0===r&&(r="undefined"),void 0===o&&(o=function(e){Core.log.print("Core.services.bind automatic created function: "+r,e)}),void 0===e[r]&&(e[r]=[]),void 0!==e[r].data?(Core.debug&&Core.log.printDebug('service.bind("'+r+'",..) returning data from previous call'),void o(e[r].data)):(void 0===e[r].callbacks&&(e[r].callbacks=[]),e[r].callbacks.push(o),Core.debug&&Core.log.printDebug("Bingding callback"),void(void 0===e[r].function&&(e[r].function=function(o){Core.debug&&Core.log.printDebug("Receiving response from: "+r,"",!0),e[r].data=o;for(var t=e[r].callbacks.length,n=0;n<t;n++)e[r].callbacks[n](o)},Core.request.call(e[r].config,e[r].function)))))}},this.dom=new function(){this.element=function(e){var r=document.getElementById(e);return null==r?(Core.log.print("'"+e+"' does not exist in any 'id' attribute of the dom's elements"),null):r},this.setHTML=function(e,r,o){Core.dom._setHTML(e,r)},this.addHTML=function(e,r){Core.dom._setHTML(e,r,!0)},this._setHTML=function(e,r,o){(element=Core.dom.element(e))&&(element.innerHTML=void 0!==o?element.innerHTML+r:r)}},this.config=new function(){this.config=null,null==this.config&&(body=document.getElementsByTagName("BODY")[0].getAttribute("core-config"))?this.config=JSON.parse(body):this.config={},this.get=function(e){return Core.debug&&Core.log.printDebug('Core.debug.get("'+e+'")',"",!0),void 0===e?Core.config.config:Core.config.config[e]?Core.config.config[e]:null},this.set=function(e,r){return Core.debug&&Core.log.printDebug('Core.debug.set("'+e+'","'+r+'")',"",!0),Core.config.config[e]=r,!0}},this.localize=new function(){this.dics=null,this.lang="en",null==this.dics&&(body=document.getElementsByTagName("BODY")[0].getAttribute("core-localize"))?this.dics=JSON.parse(body):this.dics={},(lang=document.getElementsByTagName("BODY")[0].getAttribute("core-lang"))&&(this.lang=lang),this.get=function(e){return Core.debug&&Core.log.printDebug('Core.localize.get("'+e+'")',"",!0),void 0===e?Core.localize.dics:Core.url.formParams("_debugDics")?e:void 0!==Core.localize.dics[e]?Core.localize.dics[e]:e},this.set=function(e,r){return Core.debug&&Core.log.printDebug('Core.debug.set("'+e+'","'+r+'")',"",!0),Core.localize.dics[e]=r,!0},this.addFromId=function(e){return!(!(element=document.getElementById(e))||!(localize=element.getAttribute("core-localize")))&&Core.localize.add(JSON.parse(localize))},this.add=function(e){Core.debug&&Core.log.printDebug('Core.debug.set("'+JSON.stringify(e)+'","'+value+'")',"",!0);for(k in e)Core.localize.dics[k]=e[k];return!0}},this.user=new function(){this.auth=!1,this.info={},this.cookieVar=null,this.init=function(e){Core.debug&&Core.log.printDebug('Core.user.init("'+e+'");');var r=Core.cookies.get(e);if(r){var o=null;(o=Core.cache.get("CloudFrameWorkAuthUser"))&&(void 0==typeof o.__id||o.__id!=r?Core.user.setAuth(!1):(Core.user.auth=!0,Core.user.info=o))}else Core.debug&&Core.log.printDebug(e+" cookie does not have any value.. so Core.user.setAuth(false)"),Core.user.setAuth(!1);Core.debug&&Core.log.printDebug("Core.isAuth(): "+Core.user.isAuth())},this.setAuth=function(e,r){if(Core.debug&&Core.log.printDebug("Core.user.setAuth("+e+',"'+r+'")'),!Core.authActive)return void(Core.debug&&Core.log.printDebug("Core.user.setAuth: Core.authActive == false, so ignoring call "));if(Core.user.info={},Core.user.credentials={},Core.user.auth=!1,Core.user.cookieVar=null,Core.cache.set("CloudFrameWorkAuthUser",{}),void 0!==r||(Core.debug&&Core.log.printDebug("Core.user.setAuth: using Core.authCookieName ["+Core.authCookieName+"]"),null!=typeof(r=Core.authCookieName))){if(e){if(cookieValue=Core.cookies.get(r),"undefined"==typeof cookieValue||!cookieValue)return Core.error.add('Core.user.setAuth(true,"'+r+'"), cookieVar does not exist'),!1;Core.user.auth=!0,Core.user.cookieVar=r,Core.cache.set("CloudFrameWorkAuthUser",{__id:cookieValue}),Core.user.info={__id:cookieValue}}else void 0!==r&&Core.cookies.remove(r);return!0}},this.isAuth=function(){return 1==Core.user.auth},this.add=function(e){if("object"!=typeof e)return Core.error.add("Core.user.add(data)","data is not an object"),!1;if(Core.user.isAuth()){for(k in e)Core.user.info[k]=e[k];return Core.cache.set("CloudFrameWorkAuthUser",Core.user.info),!0}return Core.error.add("Core.user.add","Core.user.isAuth() is false"),!1},this.set=function(e,r){return"string"!=typeof e?(Core.error.add("Core.user.set(key,value)","key is not a string"),!1):Core.user.isAuth()?"__id"==e?(Core.error.add("Core.user.set(key,value)","key can not be __id"),!1):(Core.user.info[e]=r,Core.cache.set("CloudFrameWorkAuthUser",Core.user.info),!0):(Core.error.add("Core.user.set(key,value)","Core.user.isAuth() is false"),!1)},this.get=function(e){if(void 0!==e)return Core.user.isAuth()?Core.user.info[e]:(Core.error.add("Core.user.get","Core.user.isAuth() is false"),!1)},this.reset=function(){return Core.user.isAuth()?(Core.user.info={__id:Core.user.info.__id},Core.cache.set("CloudFrameWorkAuthUser",Core.user.info),!0):(Core.error.add("Core.user.set(key,value)","Core.user.isAuth() is false"),!1)}},this.bind=function(e,r,o){void 0!==r&&null!=r||(r=function(e){console.log(e)}),void 0!==o&&null!=o||(o=r);var t=[];"function"==typeof e&&(e=[e]);for(k in e)t[k]=new Promise(e[k]);Promise.all(t).then(function(){r({success:!0})},function(){o({success:!1})})},this.fileInput=function(e,r){var o={length:0,error:!1,errorMsg:"",params:[],files:[]};if("object"==typeof e)if(e.files.length)for(k=0;k<e.files.length;k++)o.params["files["+k+"]"]=e.files[k],o.files[k]={name:e.files[k].name,size:e.files[k].size,type:e.files[k].type,lastModified:e.files[k].lastModified,lastModifiedDate:e.files[k].lastModifiedDate};else o.error=!0,o.errorMsg="Not found files";return o},this.init=function(e,r){Core.debug&&Core.log.printDebug("Core.init("+typeof e+","+typeof r+")"),Core.authActive&&Core.user.init(Core.authCookieName),"function"==typeof e||"array"==typeof e?Core.bind(e,function(e){"function"==typeof r&&r(e)}):"function"==typeof r&&r({success:!0})}};